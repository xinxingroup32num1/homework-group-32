# *Project4: do your best to optimize SM3 implementation (software)  

## 实验目的

优化SM3软件实现。  

## 优化内容  

1. 循环展开：循环展开是通过手动扩展循环迭代次数来减少循环控制的开销，从而提高性能。在sm3_compress函数中，我们将一个大的循环展开为多个小的循环，每个小循环处理4个回合的计算。这样可以减少循环控制的开销，并增加指令级并行性。
2. 内存对齐：内存对齐是为了加快内存访问而将数据按照特定的字节边界对齐。在代码中，并没有直接进行内存对齐操作，因为在Python中，内存对齐是由解释器自动处理的，无需手动操作。
3. 使用标准整数运算：为了避免NumPy带来的溢出问题，我们使用标准的Python整数运算来处理32位无符号整数。具体地，在sm3_rotl函数中，使用位移和按位或运算来实现循环左移。

&ensp;&ensp;&ensp;&ensp;这些优化方法的实现细节在之前给出的代码中已经展示出来。其中，循环展开应用在处理4个回合计算的过程中，通过4个连续的循环完成，减少了循环开销；而内存对齐无需手动干预；同时，我们在代码中使用了标准整数运算，避免了NumPy溢出问题。  

## 测试方法

将sm3未优化.py和sm3软件优化.py文件放到项目中运行即可。

## 实验结果展示  

### 优化前:

![image](https://github.com/xinxingroup32num1/homework-group-32/assets/138662552/ddafb5ae-52c9-4df4-b465-141d1e6b9db5)


### 优化后:

![image](https://github.com/xinxingroup32num1/homework-group-32/assets/138662552/559d48eb-f84d-4acc-a444-0c1e823b95b5)

对比可发现，优化后速度得到一定的提升。
